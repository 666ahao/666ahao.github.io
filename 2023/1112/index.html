<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Linux常用指令 | Zblog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  
  <meta name="description" content="在学习linux的过程中，有一些指令经常使用，下面是学习笔记。">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux常用指令">
<meta property="og:url" content="https://666ahao.github.io/2023/1112/index.html">
<meta property="og:site_name" content="Zblog">
<meta property="og:description" content="在学习linux的过程中，有一些指令经常使用，下面是学习笔记。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-11-12T09:49:23.000Z">
<meta property="article:modified_time" content="2023-12-21T03:00:20.000Z">
<meta property="article:author" content="George Zou">
<meta property="article:tag" content="Zblog">
<meta property="article:tag" content="沧海一粟">
<meta property="article:tag" content="江南骚年">
<meta property="article:tag" content="江南">
<meta property="article:tag" content="openkit">
<meta property="article:tag" content="沧海一粟博客">
<meta name="twitter:card" content="summary">
  
  <link rel="icon" href="/images/logo.jpg">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">

  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Oswald%3A300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  
<link rel="stylesheet" href="/css/style.css">


  
<script src="/js/jquery-3.1.1.min.js"></script>


  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >
  <link rel="stylesheet" href="/css/fashion.css" >
  <link rel="stylesheet" href="/css/glyphs.css" >

<meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Zblog" type="application/atom+xml">
</head>



  <body data-spy="scroll" data-target="#toc" data-offset="50">


  


<header id="allheader" class="site-header" role="banner" 
   >
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="Zblog" rel="home"> Zblog </a>
            
          </h1>
          
          
            <div class="site-description">珍爱生命，远离大学</div>
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>

            <div class="clearfix sf-menu">
              <ul id="main-nav" class="menu sf-js-enabled sf-arrows"  style="touch-action: pan-y;">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="/"> <a class="" href="/">首页</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="archives"> <a class="" href="/archives">归档</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="categories"> <a class="" href="/categories">分类</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="tags"> <a class="" href="/tags">标签</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663" linktext="about"> <a class="" href="/about">关于</a> </li>
                    
              </ul>
            </div>
          </nav>

      </div>
  </div>
</header>


  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-Linux常用指令" style="width: 66%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      Linux常用指令
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2023/1112/" class="article-date">
	  <time datetime="2023-11-12T09:49:23.000Z" itemprop="datePublished">十一月 12, 2023</time>
	</a>

      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/linux/">linux</a>
 
      
	<span id="busuanzi_container_page_pv">
	  本文总阅读量<span id="busuanzi_value_page_pv"></span>次
	</span>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>在学习linux的过程中，有一些指令经常使用，下面是学习笔记。<span id="more"></span></p>
<h4 id="登录注销"><a href="#登录注销" class="headerlink" title="登录注销"></a>登录注销</h4><p>su - 用户名，logout 注销用户登录（运行级别3下有效）</p>
<h4 id="关机重启"><a href="#关机重启" class="headerlink" title="关机重启"></a>关机重启</h4><p>shutdown -h now 立刻关机<br>shutdown -h   1  1分钟后关机，默认一分钟<br>shutdown  -r  now  现在重启<br>shutdown -c 取消关机，取消重启<br>halt关机<br>reboot重启<br>sync同步内存数据</p>
<h4 id="Vim编辑器快捷键"><a href="#Vim编辑器快捷键" class="headerlink" title="Vim编辑器快捷键"></a>Vim编辑器快捷键</h4><p>拷贝当前行 ：yy<br>粘贴：p<br>删除当前行: dd，删除以下5行：5dd<br>查找某个单词：命令行下&#x2F;关键词，回车，n查找下一个。<br>设置文件行号：命令行set nu<br>撤销：一般模式下，u<br>移动到20行：一般模式下，输入20,然后shift+g<br>移动到最末行最首行：一般模式下G， gg</p>
<h4 id="文件目录类"><a href="#文件目录类" class="headerlink" title="文件目录类"></a>文件目录类</h4><p>ls :显示当前目录下的文件，-a 所有文件,-l 列表展示信息,-h 方便浏览<br>cat xxx:安全打开，只读<br>vi xxx:用vim编辑器打开文件<br>more: 分页打开<br>less： 打开大文件<br>head -n  11 xx  打开文件开头11行，默认10行<br>tail -n 11  xxx  打开文件末尾11行 </p>
<p><code>tail -f xxx实时监控文件</code></p>
<p>history: 命令执行记录<br><code>history 10</code>最近执行的10条指令<br><code>!488</code>执行第488条指令</p>
<p>rm: 删除文件 -f 强制删除, -r逐层递归删除文件<br>cp: 复制文件或覆盖，-r递归复制整个文件夹 ，&#x2F;cp强制覆盖<br>mv: 移动文件、重命名<br>touch：创建空文件<br>mkdir:创建文件夹<br>rmdir:删除文件夹<br>ln: 符号连接，软连接<br><code>ln -s /root/ myroot </code>  </p>
<h4 id="打包、解包、压缩和解压指令"><a href="#打包、解包、压缩和解压指令" class="headerlink" title="打包、解包、压缩和解压指令"></a>打包、解包、压缩和解压指令</h4><p>Linux 主要有3种压缩方式，zip，gzip，xz是压缩解压指令。<br>gzip：压缩速度最快，应用广泛<br>bzip2：压缩成的文件小<br>xz：最新的方式，提供最佳的压缩率</p>
<p>tar是打包指令：</p>
<p>-c，进行打包<br>-v，显示详细信息<br>-f，指定压缩或解压的文件包<br>-z，支持gzip压缩和解压，-j支持bzip压缩，-J支持xz压缩<br>-x，解包文件<br>-t，显示文件的内容<br>-k，保留原有文件不覆盖<br>-C，切换到指定目录</p>
<p>案例1：压缩多个文件</p>
<p>tar -zcvf  pc.tar.gz  &#x2F;home&#x2F;pig.txt  &#x2F;home&#x2F;cat.txt  </p>
<p>案例2：将&#x2F;home文件夹压缩</p>
<p>tar  -zcvf  myhome.tar,gz  &#x2F;home&#x2F;</p>
<p>案例3：将myhome.tar.gz解压到当前目录</p>
<p>tar -zxvf myhome.tar.gz</p>
<p>案例4：将myhome.tar.gz解压到&#x2F;opt&#x2F;tmp2下</p>
<p>mkdir  &#x2F;opt&#x2F;tmp2<br>tar  -zxvf  &#x2F;home&#x2F;myhome.tar.gz  -C  &#x2F;opt&#x2F;tmp2</p>
<p>1、tar<br>打包：tar cvf   xxx.tar  xxx文件<br>解包：tar xvf   xxx.tar</p>
<p>2、.gz<br>压缩：gzip  xxx<br>解压：gunzip xxx.gz</p>
<p>3、.tar.gz 和 .tgz<br>压缩：tar zcvf xxx.tar.gz  xxxx<br>解压：tar zxvf xxx.tar.gz</p>
<p>4、.tar.bz2<br>压缩：tar jcvf xxx.tar.bz2  xxx<br>解缩：tar jxvf xxx.tar.bz2 </p>
<p>5、.zip<br>压缩：zip   xxx.zip  xxx<br>解压：unzip xxx.zip</p>
<p>例：<br>zip  -r  myhome.zip  &#x2F;home&#x2F;把home文件夹及子文件压缩<br>unzip  -d  &#x2F;opt&#x2F;tmp   myhome.zip  把myhome.zip解压到&#x2F;opt&#x2F;tmp</p>
<p>6、.rar<br>压缩：rar a xxx.rar xxx<br>解压：rar   x xxx.rar</p>
<p>7、.bz2<br>压缩： bzip2 -z xxxx<br>解压1：bzip2 -d &#x2F;xxx  xxx.bz2<br>解压2：bunzip2 xxx.bz2</p>
<h4 id="输出重定向-和追加-指令"><a href="#输出重定向-和追加-指令" class="headerlink" title="输出重定向&gt;和追加&gt;&gt;指令"></a>输出重定向<code>&gt;</code>和追加<code>&gt;&gt;</code>指令</h4><p>ls -l &gt; info.txt<br>cat 文件1&gt; 文件2<br>echo “xxx”&gt;文件</p>
<p><code>echo $PATH $HOSTNAME</code></p>
<h4 id="时间日期类"><a href="#时间日期类" class="headerlink" title="时间日期类"></a>时间日期类</h4><p>date: 打印当前时间</p>
<p><code>date &quot;+%Y-%m-%D&quot;</code>打印年月日<br><code>date set &quot;+%Y-%m-%D %H:%M:%S&quot;</code></p>
<p>cal :打印当前日历</p>
<p><code>cal 2023</code>打印2023年日历</p>
<h4 id="搜索查找类"><a href="#搜索查找类" class="headerlink" title="搜索查找类"></a>搜索查找类</h4><p>find :-name  ；-user； -size</p>
<p><code>find /home -name hello.txt -user root找到/home目录下用户名为root的hello.txt文件</code><br><code>find /  -size +200M  在根目录下找大于200M的文件</code></p>
<p>locate: 无需遍历整个系统，查询快</p>
<p><code>updatedb</code><br><code>locate hello.txt 定位hello.txt所在的目录</code></p>
<p>grep: 过滤查找</p>
<p><code>cat hello.txt | grep -n &quot;hello&quot;  </code>   打开hello.txt并查找hello所在行</p>
<p>案例1：在&#x2F;home目录下查找所有内容含cat的文件名</p>
<p><code>grep -r &quot;cat&quot; /home | cut -d &quot;:&quot; -f 1 </code></p>
<p>案例2：请统计&#x2F;home目录下所有文件个数及文件的总行数</p>
<p><code>find -r /home -name &quot;*.*&quot; | wc -l</code></p>
<p><code>find -r /home -name &quot;*.*&quot; |xargs wc -l</code></p>
<h4 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h4><p>添加用户：useradd xxx<br>删除用户：userdel xxx<br>修改用户所在组：usermod -g 新组名 user<br>修改用户登录目录：usermod -d 目录 user<br>查看用户是否存在：id user<br>查看当前用户：whoami</p>
<h4 id="文件所有者所在组"><a href="#文件所有者所在组" class="headerlink" title="文件所有者所在组"></a>文件所有者所在组</h4><p>添加&#x2F;删除组：groupadd&#x2F;groupdel<br>查看了文件的所有者：ls -ahl  xxx<br>改变文件的所有者：chown  新用户  文件名&#x2F;目录<br>改变文件所在组：chgrp  新组名 文件名&#x2F;目录<br>改变文件目录所有者所在组：chown  newowner:newgroup</p>
<p><strong>加上参数-R将目录下所有文件都会改变</strong> </p>
<h4 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h4><p><code>-rw-r--r--. 1 root root  239 10月 24 10:13 hello.java</code> （1）<br><code>drwxr-xr-x. 2 root root 4096 10月 23 13:56 桌面</code>               （2）<br> r:读 w:写 x:执行    [4,2,1]  r+w+x&#x3D;7</p>
<p><code>0~9位：</code></p>
<p>1）<code>0位：文件类型，-文件，d目录，c字符设备(键盘鼠标)，b块设备(硬盘)</code><br>2）<code>1~3位：所有者权限</code><br>3）<code>4~6：所在组权限</code><br>4）<code>7~9：其他组权限</code></p>
<p>[rwx]作用于文件<br>r:只读cat； w:写修改但不能删除 ；x:可执行<br>[rwx]作用于目录<br>r: 查看目录内容ls，但对文件有独立的权限;  w：可在目录内创建、删除文件 ; x：可进入目录cd</p>
<p>注（1）中数字1表示文件数或子目录数，第一个root为用户，第二个为用户组，239为文件大小单位字节，“10月 24 10:13”为最后修改日期。</p>
<h4 id="变更权限"><a href="#变更权限" class="headerlink" title="变更权限"></a>变更权限</h4><p>chmod修改文件目录的权限, u所有者，g所在组，o其他组，a所有人<br>(1)+ ，-， &#x3D;<br>chmod  u&#x3D;rwx,g&#x3D;rx,o&#x3D;x   文件名&#x2F;目录 ：给用户rwx，所在组rx，其他组x<br>chmod  o+x  文件名&#x2F;目录  ：给其他组执行权限<br>chmod   a-x   文件名&#x2F;目录  ：所有人剥夺执行权限</p>
<p>(2)通过数字变更</p>
<p>r：4 w：2 x：1  </p>
<p>rwx&#x3D;7，rw：6，rx:5，r：4，wx：3，w：2，x：1  无权限：0</p>
<p><code>chmod  u=rwx,g=rx,o=x  文件名/目录</code>相当于<code>chmod 751 文件名/目录</code></p>
<h4 id="crond任务时间调度"><a href="#crond任务时间调度" class="headerlink" title="crond任务时间调度"></a>crond任务时间调度</h4><p>设置任务调度文件：&#x2F;etc&#x2F;crontab</p>
<p>设置个人调度任务：执行crontab -e指令，接着输入任务到调度文件。如：</p>
<p> <code>*/1 * * * * ls -l /etc &gt; /tmp/to.txt</code> </p>
<p>每小时每分钟执行<code>ls -l /etc &gt; /tmp/to.txt</code> </p>
<p>五个占位符参数：</p>
<p>第一个*：一小时中第几分钟，0~59</p>
<p>第二个*：一天中第几小时，0~23</p>
<p>第三个*：一个月中第几天，1~31</p>
<p>第四个*：一年中第几个月，1~12</p>
<p>第五个*：一周中星期几，0~7（0,7为星期日）</p>
<p>crond相关指令：</p>
<p><code>-r</code>终止任务调度（删除），<code>-e</code>编辑任务，<code>-l</code>列出任务</p>
<p><code>service crond restart</code>重启crond调度</p>
<p>特殊符号说明：</p>
<p><code>*</code> ：任何时间，若第一个为*表示每分钟执行。</p>
<p><code>,</code>：逗号代表不连续的时间，<code>0 8,12,16 * * *</code>表示每天8点12点16点0分执行。</p>
<p><code>-</code>：表示连续时间范围，<code> 0 5 ** 1-6</code>周一到周六凌晨五点执行。</p>
<p><code>*/n</code>：表示每隔多久执行，<code>*/10 </code>表示每隔10分钟执行。</p>
<p>案例1：<br><u>每隔一分钟将当前时间和日期追加到&#x2F;home&#x2F;mycal中</u><br>1）vim my.sh写入<code>date &gt;&gt; /home/mycal和cal &gt;&gt; /home/mycal</code><br>2)   给my.sh增加执行权限，<code>chmod u+x my.sh</code><br>3)  crontab -e写入任务<code>*/1 * * * *  /home/my.sh</code></p>
<p>案例2：<br><u>每天凌晨2点备份数据库mydb</u><br>1）crontab -e<br>2）0 2 * * *  mysqldump -u root -p 123456  mydb &gt; &#x2F;home&#x2F;db.bak</p>
<h4 id="at定时任务"><a href="#at定时任务" class="headerlink" title="at定时任务"></a>at定时任务</h4><p>at命令是一次性定时任务，at的守护进程atd检查作业队列，以后台模式运行，每60秒检查一次，若时间与当前时间匹配则运行。使用at要保证atd在运行，使用以下命令查看进程：</p>
<p><code>ps -ef | grep atd</code></p>
<p>at [选项] [时间]</p>
<p>atq查询任务，atrm删除<br>Ctrl+D结束命令输入</p>
<p>at时间格式：<br>1）hh:mm(04:00)当天或第二天执行<br>2）midnight&#x2F;noon&#x2F;teatime<br>3）12小时制，如9am ,3pm<br>4）指定具体日期：month day或mm&#x2F;dd&#x2F;yy或dd.mm.yy，指定日期必须在时间后面04:00 2023-11-1<br>5）相对计时：<code>now  + count time-units</code>，now是当前时间，count是数量，tim-units是时间单位，minutes,hours,days,months,weeks。</p>
<p><code>now + 5 days</code>	五天后<br><code>5pm + 2 days</code>	两天后下午五点</p>
<p>6）today、tommorow</p>
<p>案例1：<br>每天下午5点，把时间输入到&#x2F;root&#x2F;data.log里</p>
<ol>
<li><code>at 5pm tommorow</code></li>
<li><code>date  &gt; /root/data.log</code></li>
</ol>
<p>案例2：<br>2天后五点执行&#x2F;bin&#x2F;ls &#x2F;home<br>1)<code>at 5pm + 2 days</code><br>2)<code>/bin/ls /home</code></p>
<p>案例3：<br>删除5号at任务<br><code>atrm 5</code></p>
<h4 id="磁盘分区"><a href="#磁盘分区" class="headerlink" title="磁盘分区"></a>磁盘分区</h4><p>磁盘分区和文件系统之间通过挂载mount联系起来，分区构成整个文件系统。</p>
<p>查看设备挂载情况：<code>lsblk  -f</code></p>
<p>Linux硬盘分为IDE和SCSI类型，目前主要为SCSI。</p>
<p>对于IDE硬盘，驱动器标识符为<code>hdx~</code>，hd表示IDE设备类型，x表示盘号(a主盘，b从属盘,c…)，<code>~</code>表示分区，前四个分区用1-4数字表示，5开始为逻辑分区。如hda2表示第一个IDE硬盘的第二个分区。</p>
<p>对于SCSI&#x2F;SATA硬盘，标识为“sdx~”，sd为SCSI硬盘类型，其余和IDE表示类似。</p>
<p>对于NVMe硬盘，以nvme0n开头，nvme0n1p1是第一块硬盘的第一个分区，而nvme0n2p3则是第二块硬盘的第三个分区。</p>
<p><u>案例：挂载一块硬盘</u></p>
<p>1.虚拟机添加硬盘</p>
<p>在虚拟机设置中在设备列表里添加一块硬盘，完成后重启才能识别。</p>
<p>2.分区</p>
<p><code>fdisk /dev/sdb</code></p>
<p>m 显示命令列表<br>p 显示磁盘分区，fdisk -l<br>n 新增分区<br>d 删除分区<br>w写入并退出<br>q 直接退出</p>
<p>3.格式化</p>
<p>格式化文件系统获得UUID：<code>mkfs -t ext4 /dev/sdb1</code></p>
<p>4.挂载</p>
<p>将分区和文件目录联系起来：mount 设备名 文件目录</p>
<p><code>mount /dev/sdb1  /newdisk</code></p>
<p>umount 设备名或挂载目录(mountpoint)</p>
<p><code>umount  /dev/sdb1</code>或<code>umount /newdisk</code></p>
<p>但是重启后失效</p>
<p>5.设置自动挂载</p>
<p>实现永久挂载，修改&#x2F;etc&#x2F;fstab文件，添加设备，重启或执行mount -a立刻生效。</p>
<p><code>/dev/sdb1              /newdisk                    0.0</code></p>
<h4 id="磁盘情况查询"><a href="#磁盘情况查询" class="headerlink" title="磁盘情况查询"></a>磁盘情况查询</h4><p>1）查看磁盘整体使用情况 ：<code>df -h</code></p>
<p>2）查询指定目录的磁盘占用情况</p>
<p><code>du -h</code> 默认当前目录</p>
<p>-s  占用大小汇总<br>-h 带计量单位<br>-a 带上文件<br>–max-depth&#x3D;1子目录深度<br>-c 列出明细，增加汇总值</p>
<p>案例1：查询&#x2F;opt目录下一层子目录的磁盘使用情况</p>
<p><code>du -h --max-depth=1 /opt</code></p>
<p>3）查看内存使用情况：<code>free -h</code></p>
<ol start="4">
<li>查看系统负载命令：<code>uptime</code><br>-p，显示系统运行时间，-s，显示系统启动时间</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">15:32:56 up  6:59,  2 users,  load average: 0.04, 0.03, 0.05</span><br><span class="line">15:32:56当前时间，up运行时间，2个用户，过去1、5、15分钟负载</span><br></pre></td></tr></table></figure>

<p>5）虚拟内存状态、io状态<br>vmstat\iostat</p>
<h4 id="工作实用指令"><a href="#工作实用指令" class="headerlink" title="工作实用指令"></a>工作实用指令</h4><p>1）统计&#x2F;opt文件夹下文件的个数</p>
<p><code>ls -l /opt | grep &quot;^-&quot; | wc -l</code> </p>
<p>2）统计&#x2F;opt文件夹下目录的个数</p>
<p><code>ls -l /opt | grep &quot;^d&quot; | wc -l</code></p>
<p>3）统计&#x2F;opt文件夹下文件的个数，包括子文件夹下的文件</p>
<p><code>ls -lR /opt | grep &quot;^-&quot; | wc -l</code> </p>
<p>4）统计&#x2F;opt文件夹下目录的个数，包括子文件夹下</p>
<p><code>ls -lR /opt | grep &quot;^d&quot; | wc -l</code> </p>
<p>5）树状显示目录结构</p>
<p><code>yum install tree</code><br><code>tree /opt</code></p>
<h4 id="Linux网络配置"><a href="#Linux网络配置" class="headerlink" title="Linux网络配置"></a>Linux网络配置</h4><p>查看网络配置：ifconfig或ip addr<br>测试网络连通：ping ip地址</p>
<p>1）DHCP动态路由分配</p>
<p>自动分配，ip不会冲突，但是不固定。</p>
<p>2）静态分配IP(固定IP)</p>
<p>修改网卡配置文件，<code>vi /etc/sysconfig/network-scripts/ifcfg-ens33</code>，将ip地址配置成静态的，添加固定ip如下。</p>
<p>DEVICE&#x3D;ens33 (设备网卡名)<br>HWADDR&#x3D;00:0c:2x:6x:0x:xx  (MAC地址)<br>TYPE&#x3D;ethernet  (网络类型)<br>UUID&#x3D;029ad-d12e-dw23-32da-1d2c (随机id)<br>ONBOOT&#x3D; yes  (系统启动时网络接口是否开启)<br>BOOTPROTO&#x3D;static  (ip配置方法)[none;static;dhcp;bootp]<br>IPADDR&#x3D;192.168.157.129 (ip地址)<br>GATEWAY&#x3D;192.168.157.2  (网关)<br>DNS1&#x3D;192.168.157.2   (DNS解析器)</p>
<p>在虚拟机中找到虚拟网络编辑器，找到该网络如vmnet8，修改子网ip地址为192.168.157.0，修改NAT配置中网关地址，点击确定再点击应用。之后重启系统或者输入<code>service network restart</code>生效。</p>
<h4 id="设置主机名和HOST映射"><a href="#设置主机名和HOST映射" class="headerlink" title="设置主机名和HOST映射"></a>设置主机名和HOST映射</h4><p>查看主机名：hostname<br>修改主机名：<code>vi /etc/hostname</code>，重启</p>
<p>设置HOST映射：</p>
<p>1）在windows的”C:\Windows\System32\drivers\etc\hosts”下添加ip与主机名的映射：192.168.157.129    CentOS7</p>
<p>ping CentOS7可ping通。<br>windows cmd窗口<code>ipconfig /displaydns</code>列出本地dns缓存，<code>ipconfig /flushdns</code>清除缓存。</p>
<p>2）linux在&#x2F;etc&#x2F;hosts文件修改</p>
<h4 id="监控网络状态"><a href="#监控网络状态" class="headerlink" title="监控网络状态"></a>监控网络状态</h4><p>netstat  [options]，选项说明：</p>
<p>-an，按一定顺序输出  ；-p，显示哪个进程在调用</p>
<p>例如：查看sshd服务的信息</p>
<p><code>netstat -anp |grep sshd</code></p>
<p>ping  ip，监测网络连接。</p>
<p>案例：统计连接到服务器的各个ip情况，并按连接数从大到小排</p>
<p><code>netstat -an | grep ESTABLISHED | awk  -F  &quot; &quot;   &#39;&#123;print $5&#125;&#39;  | cut  -d  &quot;:&quot;  -f  1 | sort |uniq -c | sort -nr</code> </p>
<p>案例：使用tcpdump监听本机来自192.168.300.1，端口为22的通信，并保存到tcpdump.log</p>
<p><code>tcpdump -i ens33 host 192.168.300.1 and port 22 &gt;&gt; /opt/tcpdump.log</code></p>
<h4 id="进程管理"><a href="#进程管理" class="headerlink" title="进程管理"></a>进程管理</h4><p>1、查看进程信息</p>
<p>ps指令：</p>
<p>ps -A 显示当前所有进程信息<br>ps -a 显示所有终端机下执行的程序<br>ps -u 以用户的格式显示进程信息<br>ps  -x 显示后台进程运行的参数<br>ps -aux | grep sshd 查看也没有sshd服务</p>
<p>USER进程执行用户，PID进程号，%CPU进程占CPU百分比，%MEM进程占物理内存的百分比，VSZ进程占虚拟内存的大小，RSS进程占物理内存的大小KB，TTY终端名称，STAT进程状态(S睡眠，R正在运行，Z僵尸进程，D短期等待，T被跟踪或被停止，&gt;高优先级)，START进程开始执行时间，TIME占用CPU时间，COMMAND启动进程的命令或参数。</p>
<p>ps -ef 以全格式显示所以进程，不会截断，System V格式。</p>
<p><code>ps -ef | grep sshd</code></p>
<p>UID用户ID，PID进程号，PPID父进程PID，TTY终端设备号。</p>
<p>&#x2F;&#x2F;查找进程状态信息<br>cat &#x2F;proc&#x2F;pid&#x2F;status<br>&#x2F;&#x2F;查找进程启动命令行<br>cat &#x2F;proc&#x2F;pid&#x2F;cmdline</p>
<p>2、终止进程</p>
<p>kill  [option]  PID  ，终止进程，option&#x3D;-9表示强制终止。<br>killall 进程名  ，终止该进程及子进程。</p>
<p><u>案例1：踢掉某个非法登录用户tom</u><br>root       1143      1  0 16:23 ?        00:00:00 &#x2F;usr&#x2F;sbin&#x2F;sshd -D<br>root       1741   1143  0 16:23 ?        00:00:00 sshd: root@pts&#x2F;0<br>root       5031   1143  1 20:03 ?        00:00:00 sshd: tom [priv]<br>tom        5043   5031  0 20:03 ?        00:00:00 sshd: tom@pts&#x2F;1</p>
<p><code>kill  5031</code></p>
<p>案例2：终止远程登录服务器sshd，合适时重启服务</p>
<p><code>kill 1143</code><br><code>/bin/systemctl start sshd.service</code></p>
<p>案例3：终止多个gedit</p>
<p><code>killall gedit</code></p>
<p>案例4：强制杀死终端</p>
<p>root       5277   5267  0 20:16 pts&#x2F;1    00:00:00 bash</p>
<p><code>kill -9 5277</code></p>
<p>3、查看进程树</p>
<p>pstree ，-p 显示进程号，-u显示用户</p>
<p>4、<u>top动态监控进程（性能监视器，任务管理器）</u></p>
<p>top: 实时显示进程信息<br>top -d 秒数，几秒后刷新<br>top -i，不显示闲置和僵尸进程<br>top -p PID，指定某进程ID监控进程</p>
<p>top交互操作说明，输入：</p>
<p>P，以CPU使用率排序，默认<br>N，以PID排序<br>M，以内存使用率排序<br>q，退出<br>u，接着输入用户名，回车即可查看某用户相关进程<br>k，接着输入进程号，回车即可终止某进程</p>
<p>案例1：监控用户tom的相关进程</p>
<p>top，输入u，接着输入tom</p>
<p>案例2：终止指定进程，踢掉tom</p>
<p>PID   USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM   TIME+ COMMAND<br>2060  tom       20   0    160988   2372   1028 S   0.0    0.1     0:00.01     sshd<br>2064  tom       20   0    116876   3296   1676 S   0.0     0.2    0:00.04    bash </p>
<p>top，输入u回车，输入tom回车，输入k回车，输入2064回车。</p>
<h4 id="Service服务管理"><a href="#Service服务管理" class="headerlink" title="Service服务管理"></a>Service服务管理</h4><p>查看系统服务：</p>
<p>1）setup，系统服务。<br>2）service指令管理服务在&#x2F;etc&#x2F;init.d查看，<code>ls -l /etc/init.d/</code></p>
<p><u>service指令：</u></p>
<p>service  服务名  [start|stop|restart|reload|status]</p>
<p>CentOS7以后，大多服务不使用service，而使用systemctl。<br>[使用service关闭network服务，一旦关闭，将无法连接SSH服务]</p>
<p>服务运行级别，在&#x2F;etc&#x2F;initab查看，<code>systemctl get-default</code>查看当前运行级别，<code>systemctl set-default T.target</code>设置默认级别。</p>
<p><u>chkconfig指令：</u></p>
<p>查看服务：chkconfig –list<br>设置服务在level级别开启：<code>chkconfig  --level  [0/1/2/3/4/5/6]  服务名  on/off</code></p>
<p>如设置network在3级别打开或关闭：<code>chkconfig --level 3 network on/off</code>，之后重启系统即可生效。</p>
<p><u>systemctl指令：</u></p>
<p>systemctl   [start |stop |restart |status |enable |disable]  服务名</p>
<p>该指令管理的服务在&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system查看。</p>
<p>systemctl  list-unit-files，查看服务开机启动状态<br>systemctl  enable  服务名 ，设置服务开机启动<br>systemctl  disable  服务名，关闭服务自启动<br>systemctl   is-enabled  服务名 ，查看某个服务是否自启动</p>
<p>案例1：查看当前防火墙状态，关闭和打开防火墙服务</p>
<p><code>systemctl  list-unit-files  | grep  firewalld</code>  或<br><code>systemctl is-enabled firewalld</code>  或<br><code>systemctl  status firewalld</code><br><code>systemctl  stop firewalld</code><br><code>systemctl  start firewalld</code></p>
<p>【systemctl start&#x2F;stop 服务，服务在系统重启后恢复原样】</p>
<p>案例2：防火墙打开和关闭指定端口111</p>
<p>打开打开：<code>firewall-cmd --permanent  --add-port=端口/协议</code><br>关闭打开：<code>firewall-cmd  --permanent  --remove-port=端口/协议</code><br>重载生效：<code>firewall-cmd  --reload</code><br>查询端口是否开放：<code>firewall-cmd  --query-port=端口/协议</code><br>查看那些已添加端口：<code>firewall-cmd --list-port</code></p>
<p><code>firewall-cmd --permanent  --add-port=111/tcp</code><br><code>firewall-cmd --reload</code></p>
<h4 id="RPM和YUM"><a href="#RPM和YUM" class="headerlink" title="RPM和YUM"></a>RPM和YUM</h4><p>rpm</p>
<p>rpm是linux常用的下载和打包安装工具，生成.rpm结尾的文件。</p>
<p>软件包名基本格式：firefox-68.10.0-1.el7.centos.x86_64，名称：firefox，版本：68.10.0，适用操作系统：el7.centos.x86_64，norach表示32位64位通用。<br>1）查询<br>查询已安装的rpm包列表：rpm -qa | grep xxx<br>查询所有rpm包：rpm -qa<br>查询软件包是否安装：rpm  -q  软件包名<br>查询软件包信息：rpm -qi  软件包名<br>查询软件包中的安装文件：rpm -ql  软件包名<br>查询文件所属软件包：rpm -qf  文件全路径<br>例：rpm -qf &#x2F;etc&#x2F;passwd	<br>2）安装<br>安装软件包：rpm  -ivh   软件包全路径，-i安装，-h显示进度，-v显示安装信息<br>例：rpm -ivh &#x2F;opt&#x2F;firefox-68.10.0-1.el7.centos.x86_64<br>3）卸载<br>卸载安装包：rpm  -e  xx软件包名 [erase]<br>强制卸载：rpm -e –nodeps  xxx</p>
<p>yum</p>
<p>yum是一个Shell前端软件包管理器，基于rpm，能够从服务器中下载rpm包并安装，可以自动处理依赖关系，并一次性安装所以依赖，但需要连接网络。</p>
<p>-y:代替手动输入yes，自动执行安装<br>查询服务器是否有可安装的xx软件：yum  list | grep xxx<br>查看可更新的软件：yum list updates<br>查看已安装的软件：yum list installed<br>安装包：yum install   xxx<br>删除软件：yum remove  xxx<br>更新所以软件：yum update<br>更新一个软件：yum update xxx<br>检查更新的包：yum check-update<br>清除缓存目录下的软件包：yum clean all<br>更新软件包缓存：yum makecache<br>搜寻软件包：yum  search  xxx<br>查看软件包信息：yum info xxx<br>设置镜像的仓库：<br><code>yum config-manager  --add-repo  http://mirrors.aliyun.com/repo/Centos-7.repo</code></p>
<p>影响yum使用的主要文件:<br>基本设置： &#x2F;etc&#x2F;yum.conf<br>仓库软件源集： &#x2F;etc&#x2F;yum.repo.d&#x2F;*.repo<br>日志文件： &#x2F;var&#x2F;log&#x2F;yum.log</p>
<p>*.repo的基本配置项：App-Stream BaseOS Extras<br>[base]：名称，可以随意取<br>name：描述repo含义<br>baseurl：后面接地址，是指定一个固定地址<br>enabled:是否启用此频道（1为启动，0为不启用）<br>gpgcheck：是否需要查阅RPM文件内数字证书<br>gpgkey：数字证书公钥文件所在位置，使用默认值</p>
<p>开启软件缓存 nano  &#x2F;etc&#x2F;yum.conf</p>
<p>案例：使用yum安装firefox<br>rpm -e firefox<br>yum list | grep firefox<br>yum install  firefox</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/linux/">linux</a>

      
      
        
	<div id="comment">
		<!-- 来必力City版安装代码 -->
		<div id="lv-container" data-id="city" data-uid="MTAyMC81NTU1Mi8zMjAxOQ==">
		<script type="text/javascript">
		   (function(d, s) {
		       var j, e = d.getElementsByTagName(s)[0];

		       if (typeof LivereTower === 'function') { return; }

		       j = d.createElement(s);
		       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
		       j.async = true;

		       e.parentNode.insertBefore(j, e);
		   })(document, 'script');
		</script>
		<noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
		</div>
		<!-- City版安装代码已完成 -->
	</div>



      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2023/1113/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          找回mysql密码
        
      </div>
    </a>
  
  
    <a href="/2023/1111/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">Shell编程</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    
      <ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E6%B3%A8%E9%94%80"><span class="nav-number">1.</span> <span class="nav-text">登录注销</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B3%E6%9C%BA%E9%87%8D%E5%90%AF"><span class="nav-number">2.</span> <span class="nav-text">关机重启</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Vim%E7%BC%96%E8%BE%91%E5%99%A8%E5%BF%AB%E6%8D%B7%E9%94%AE"><span class="nav-number">3.</span> <span class="nav-text">Vim编辑器快捷键</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95%E7%B1%BB"><span class="nav-number">4.</span> <span class="nav-text">文件目录类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%93%E5%8C%85%E3%80%81%E8%A7%A3%E5%8C%85%E3%80%81%E5%8E%8B%E7%BC%A9%E5%92%8C%E8%A7%A3%E5%8E%8B%E6%8C%87%E4%BB%A4"><span class="nav-number">5.</span> <span class="nav-text">打包、解包、压缩和解压指令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91-%E5%92%8C%E8%BF%BD%E5%8A%A0-%E6%8C%87%E4%BB%A4"><span class="nav-number">6.</span> <span class="nav-text">输出重定向&gt;和追加&gt;&gt;指令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E7%B1%BB"><span class="nav-number">7.</span> <span class="nav-text">时间日期类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%90%9C%E7%B4%A2%E6%9F%A5%E6%89%BE%E7%B1%BB"><span class="nav-number">8.</span> <span class="nav-text">搜索查找类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="nav-number">9.</span> <span class="nav-text">用户管理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E6%89%80%E6%9C%89%E8%80%85%E6%89%80%E5%9C%A8%E7%BB%84"><span class="nav-number">10.</span> <span class="nav-text">文件所有者所在组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="nav-number">11.</span> <span class="nav-text">权限管理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%98%E6%9B%B4%E6%9D%83%E9%99%90"><span class="nav-number">12.</span> <span class="nav-text">变更权限</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#crond%E4%BB%BB%E5%8A%A1%E6%97%B6%E9%97%B4%E8%B0%83%E5%BA%A6"><span class="nav-number">13.</span> <span class="nav-text">crond任务时间调度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#at%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1"><span class="nav-number">14.</span> <span class="nav-text">at定时任务</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA"><span class="nav-number">15.</span> <span class="nav-text">磁盘分区</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A3%81%E7%9B%98%E6%83%85%E5%86%B5%E6%9F%A5%E8%AF%A2"><span class="nav-number">16.</span> <span class="nav-text">磁盘情况查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B7%A5%E4%BD%9C%E5%AE%9E%E7%94%A8%E6%8C%87%E4%BB%A4"><span class="nav-number">17.</span> <span class="nav-text">工作实用指令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Linux%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE"><span class="nav-number">18.</span> <span class="nav-text">Linux网络配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E4%B8%BB%E6%9C%BA%E5%90%8D%E5%92%8CHOST%E6%98%A0%E5%B0%84"><span class="nav-number">19.</span> <span class="nav-text">设置主机名和HOST映射</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%9B%91%E6%8E%A7%E7%BD%91%E7%BB%9C%E7%8A%B6%E6%80%81"><span class="nav-number">20.</span> <span class="nav-text">监控网络状态</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86"><span class="nav-number">21.</span> <span class="nav-text">进程管理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Service%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="nav-number">22.</span> <span class="nav-text">Service服务管理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#RPM%E5%92%8CYUM"><span class="nav-number">23.</span> <span class="nav-text">RPM和YUM</span></a></li></ol>
    
    </div>
  </aside>
</section>
        
      </div>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2020-2025 Zblog All Rights Reserved.
        
            <span id="busuanzi_container_site_uv">
              本站访客数<span id="busuanzi_value_site_uv"></span>人次  
              本站总访问量<span id="busuanzi_value_site_pv"></span>次
            </span>
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hipaper" target="_blank">hipaper</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");

    wrapdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";


    <!-- headerblur min height -->
    
    
</script>
    
<div style="display: none;">
  <script src="https://s11.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
</div>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>


<script src="/js/bootstrap.js"></script>


<script src="/js/main.js"></script>








  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	</script>






  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
